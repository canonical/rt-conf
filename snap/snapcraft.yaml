name: rt-conf
base: core24
version: '0.1'
summary: Configure and tune your real-time system
description: |
  Tool destined to configure real-time parameters in a Linux system.
  Currently let's you configure kernel commandline parameters.

grade: stable
confinement: strict

parts:
  src:
    source: .
    plugin: go
    build-snaps:
      - go
    stage-packages:
      - grub2-common
      - grub-common
  
  config:
    plugin: dump
    source: .
    organize:
      config.yaml: config/config.yaml
    stage:
      - config/config.yaml

plugs:
  etc-default-grub:
    interface: system-files
    write:
      - /etc/default/grub
  boot-grub-grubcfg:
    interface: system-files
    write:
      - /boot/grub/grub.cfg

apps:
  rt-conf:
    plugs:
      - home
      - etc-default-grub
      - boot-grub-grubcfg
    command: bin/rt-conf
